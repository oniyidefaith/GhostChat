<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GhostTalk</title>
    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
            <link rel="icon" type="image/x-icon" href="{% static 'svg/incognito.svg' %}">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="{% static 'auths/link.css' %}">

    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
</head>
<body class="link_body">

<div class="link_box">
    <div class="link_content">
        <h2><img src="{% static 'svg/logo.svg' %}"></h2>
        <hr>
        <p>Click the link below to view GhostTalkers or share it to see what your friends have to say</p>
        <div class="copy_div">
            <div class="copy">
                <a href="{% url 'room' room_name=request.user %}?id={{ request.session.user_id }}" target="_blank" id="select_txt">link</a>
            </div>
            <img class="clip" title="Copy Link" typeof="button" onclick="copy_data('select_txt')" id="img" src="{% static 'svg/clipboard.svg' %}">

        </div>
    </div>
</div>
<script>
function copy_data(elementId) {
  var linkElement = document.getElementById(elementId);
  var linkValue = linkElement.getAttribute('href');
  var roomName = "{{ request.user }}";
  var textToCopy = `Say something about ${roomName} you're incognito\n  ${linkValue}`;

  var tempInput = document.createElement("input");
  tempInput.setAttribute("value", textToCopy);
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);

  var imgElement = document.getElementById("img");
  imgElement.src = "{% static 'svg/check.svg' %}";
  imgElement.title = "Copied!";
}
</script>
 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
